<main class="flex-1 overflow-auto">
    <div class="p-6">
        <div class="space-y-6">
            <!-- Loading State -->
            @if (loading()) {
            <div class="flex items-center justify-center py-12 ">
                <div class="text-center">
                    <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-rose-gold mx-auto mb-4"></div>
                    <p class="text-gray-600">Loading appointments data...</p>
                </div>
            </div>
            }
            <div class="flex flex-col sm:flex-row gap-4 justify-between">
                <div class="relative flex-1 max-w-md">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                        class="lucide lucide-search absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4">
                        <circle cx="11" cy="11" r="8"></circle>
                        <path d="m21 21-4.3-4.3"></path>
                    </svg>
                    <input type="text" [ngModel]="searchTerm()" (ngModelChange)="onSearch($event)"
                        class="flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm pl-10"
                        placeholder="Search appointments..." value="">
                </div>
                <button
                    class="inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2 gap-2"
                    (click)="openModal()">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                        class="lucide lucide-plus h-4 w-4">
                        <path d="M5 12h14"></path>
                        <path d="M12 5v14"></path>
                    </svg>New Appointment
                </button>
            </div>

            <!-- Data Table -->
            <app-data-table [data]="filteredAppointments()" [data]="appointments()" [config]="tableConfig"
                [searchPlaceholder]="'appointments'" [rowIdField]="'id'" (actionClick)="onTableAction($event)">
            </app-data-table>
        </div>
    </div>

    <!-- Modal with Dynamic Form -->
    <app-modal [config]="modalConfig" [isOpen]="isModalOpen" (closed)="closeModal()" (submitted)="onFormSubmit($event)">

        <app-dynamic-form [config]="formConfig" (formSubmit)="onFormSubmit($event)" (formCancel)="onFormCancel()">
        </app-dynamic-form>
    </app-modal>
</main>